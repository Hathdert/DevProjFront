<div class="container mt-5 mb-5" *ngIf="offer">
    <div class="row justify-content-center">
        <div class="col-lg-10">
            <div class="flip-container" [class.flipped]="showBack">
                <div class="flipper">
                    <div class="flip-front">
                        <!-- Top Bar -->
                        <div class="d-flex flex-column align-items-center px-5 pt-5 pb-3 offer-topbar"
                            style="background: url('assets/images/back2.png') center center/cover no-repeat; border-radius: 2rem 2rem 0 0; min-height: 220px; width: 100%;">
                            <button class="btn btn-outline-secondary btn-lg rounded-pill fw-bold align-self-start mb-4"
                                (click)="goBack()">
                                ‚Üê Back
                            </button>
                            <h2 class="fw-bold mb-3 text-center" style="color: #2C3E50; font-size: 2.4rem;">
                                {{ offer.title }}
                            </h2>
                            <div class="mb-2 fw-semibold" style="color: #C0392B; font-size: 1.3rem;">
                                {{ company?.name }}
                            </div>
                            <div class="mb-4 text-muted" style="font-size: 1.05rem;">
                                {{ company?.email }}
                            </div>
                        </div>
                        <div class="row g-5 px-5 pb-5 align-items-stretch">
                            <!-- Left Panel: Description & Requirements -->
                            <div class="col-md-7 d-flex">
                                <div class="offer-panel flex-grow-1 d-flex flex-column justify-content-center">
                                    <h4 class="fw-bold mb-3" style="color: #C0392B;">Description</h4>
                                    <p class="mb-4 fs-5 text-muted">{{ offer.description }}</p>
                                    <h5 class="fw-bold mb-2" style="color: #2C3E50;">Requirements</h5>
                                    <p class="fs-6 text-muted">{{ offer.requirements }}</p>
                                </div>
                            </div>
                            <!-- Right Panel: Other Info -->
                            <div class="col-md-5 d-flex">
                                <div class="offer-panel flex-grow-1 d-flex flex-column justify-content-center">
                                    <h5 class="fw-bold mb-3" style="color: #2C3E50;">Details</h5>
                                    <div class="mb-2"><strong>Area: </strong> <span class="text-muted">{{ offer.area
                                            }}</span></div>
                                    <div class="mb-2"><strong>Start Date: </strong> <span class="text-muted">{{
                                            offer.startDate }}</span></div>
                                    <div class="mb-2"><strong>End Date: </strong> <span class="text-muted">{{
                                            offer.endDate }}</span></div>
                                    <div class="mb-2"><strong>Vacancies: </strong> <span class="text-muted">{{
                                            offer.vacancies }}</span></div>
                                    <!-- <div class="mb-2"><strong>Offer Type: </strong> <span class="text-muted">{{ offer.offer }}</span></div> -->
                                    <div class="mb-2"><strong>Applications: </strong> <span class="text-muted">{{
                                            offer.applications.length }}</span></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="mt-4" *ngIf="applications && applications.length > 0">
                    <h4 class="fw-bold mb-3" style="color: #2C3E50;">Applications</h4>
                    <table class="table table-bordered">
                        <thead>
                            <tr>
                                <th>Candidate Name</th>
                                <th>Email</th>
                                <th>State</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr *ngFor="let app of applications">
                                <td>{{ app.candidate?.name }}</td>
                                <td>{{ app.candidate?.email }}</td>
                                <td>
                                    <span *ngIf="app.state === 0" class="badge bg-warning text-dark">Pending</span>
                                    <span *ngIf="app.state === 1" class="badge bg-success">Accepted</span>
                                    <span *ngIf="app.state === 2" class="badge bg-danger">Rejected</span>
                                </td>
                                <td>
                                    <button 
                                        class="btn btn-outline-secondary btn-sm">
                                        View Details
                                    </button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="mt-4" *ngIf="applications && applications.length === 0">
                    <p class="text-muted">No applications for this offer yet.</p>
                </div>
            </div>
        </div>
    </div>
</div>