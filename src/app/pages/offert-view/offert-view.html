<div class="container mt-5 mb-5" *ngIf="offer">
  <div class="row justify-content-center">
    <div class="col-lg-10">
      <div class="flip-container" [class.flipped]="showBack">
        <div class="flipper">
          <div class="flip-front">
            <!-- Top Bar -->
            <div class="d-flex flex-column align-items-center px-5 pt-5 pb-3 offer-topbar"
              style="background: url('assets/images/back2.png') center center/cover no-repeat; border-radius: 2rem 2rem 0 0; min-height: 220px; width: 100%;">
              <button class="btn btn-outline-secondary btn-lg rounded-pill fw-bold align-self-start mb-4"
                (click)="goBack()">
                ← Back
              </button>
              <h2 class="fw-bold mb-3 text-center" style="color: #2C3E50; font-size: 2.4rem;">
                {{ offer.title }}
              </h2>
              <div class="mb-2 fw-semibold" style="color: #C0392B; font-size: 1.3rem;">
                {{ company?.name }}
              </div>
              <div class="mb-4 text-muted" style="font-size: 1.05rem;">
                {{ company?.email }}
              </div>
              <button class="btn btn-primary btn-lg rounded-pill fw-bold mt-2 mb-5" style="min-width: 140px;"
                (click)="showBack = true" *ngIf="navBarValue === '1'">
                Apply Now
              </button>
            </div>
            <div class="row g-5 px-5 pb-5 align-items-stretch">
              <!-- Left Panel: Description & Requirements -->
              <div class="col-md-7 d-flex">
                <div class="offer-panel flex-grow-1 d-flex flex-column justify-content-center">
                  <h4 class="fw-bold mb-3" style="color: #C0392B;">Description</h4>
                  <p class="mb-4 fs-5 text-muted">{{ offer.description }}</p>
                  <h5 class="fw-bold mb-2" style="color: #2C3E50;">Requirements</h5>
                  <p class="fs-6 text-muted">{{ offer.requirements }}</p>
                </div>
              </div>
              <!-- Right Panel: Other Info -->
              <div class="col-md-5 d-flex">
                <div class="offer-panel flex-grow-1 d-flex flex-column justify-content-center">
                  <h5 class="fw-bold mb-3" style="color: #2C3E50;">Details</h5>
                  <div class="mb-2"><strong>Area: </strong> <span class="text-muted">{{ offer.area }}</span></div>
                  <div class="mb-2"><strong>Start Date: </strong> <span class="text-muted">{{ offer.startDate }}</span>
                  </div>
                  <div class="mb-2"><strong>End Date: </strong> <span class="text-muted">{{ offer.endDate }}</span>
                  </div>
                  <div class="mb-2"><strong>Vacancies: </strong> <span class="text-muted">{{ offer.vacancies }}</span>
                  </div>
                  <!-- <div class="mb-2"><strong>Offer Type: </strong> <span class="text-muted">{{ offer.offer }}</span></div> -->
                  <div class="mb-2"><strong>Applications: </strong> <span class="text-muted">{{
                      offer.applications.length }}</span></div>
                </div>
              </div>
            </div>
          </div>
          <div class="flip-back">
            <!-- Top Bar igual ao lado principal -->
            <div class="d-flex flex-column align-items-center px-5 pt-5 pb-3 offer-topbar"
              style="background: url('assets/images/back2.png') center center/cover no-repeat; border-radius: 2rem 2rem 0 0; min-height: 220px; width: 100%;">
              <button class="btn btn-outline-secondary btn-lg rounded-pill fw-bold align-self-start mb-4"
                (click)="showBack = false">
                ← Back
              </button>
              <h2 class="fw-bold mb-3 text-center" style="color: #2C3E50; font-size: 2.4rem;">
                Apply for Internship
              </h2>
            </div>
            <div class="d-flex flex-column align-items-center px-5 pb-5" style="width: 100%;">
              <form (ngSubmit)="submitApplication()" #applicationForm="ngForm" style="width: 100%; max-width: 400px;">
                <div class="mb-3">
                  <label class="form-label">Pitch</label>
                  <textarea class="form-control" [(ngModel)]="application.pitch" name="pitch" rows="7"
                    required></textarea>
                </div>
                <div class="mb-3">
                  <label for="companyProfilePic" class="form-label">Curriculum Vitae</label>
                  <input type="file" id="applicationDocument" class="form-control" (change)="onDocumentSelected($event)"
                    accept=".pdf" />
                </div>
                <input type="hidden" name="candidateId" [(ngModel)]="application.candidate.id" />
                <div class="d-flex justify-content-center mt-4 mb-3">
                  <button class="btn btn-primary btn-lg rounded-pill fw-bold" style="min-width: 140px;" type="submit">
                    Submit Application
                  </button>
                </div>
                <div *ngIf="success" class="alert alert-success mt-3">Application sent successfully!</div>
                <div *ngIf="error" class="alert alert-danger mt-3">{{ error }}</div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>