<div class="container py-4">
  <div class="card admin-container p-4">
    <h2 class="my-5 text-center admin-title">ADMIN AREA</h2>

    <h2 class="my-5 text-center">Export .CSV's - Power BI</h2>
    <div class="d-flex justify-content-center gap-3 mb-4 flex-wrap">
      <button class="btn custom-btn" (click)="downloadCSV('candidates', 'candidates.csv')">
        Candidate
      </button>
      <button class="btn custom-btn" (click)="downloadCSV('companies', 'companies.csv')">
        Company
      </button>
      <button class="btn custom-btn" (click)="downloadCSV('applications', 'applications.csv')">
        Applications
      </button>
      <button class="btn custom-btn" (click)="downloadCSV('documents', 'documents.csv')">
        Documents
      </button>
      <button class="btn custom-btn" (click)="downloadCSV('internshipOffers', 'internship_offers.csv')">
        Internship Offers
      </button>
    </div>

    <h2 class="my-5 text-center">Candidates</h2>
    <input type="text" class="form-control mb-4" placeholder="Filter candidates by email"
      [(ngModel)]="emailFilterCandidates" (ngModelChange)="filterCandidates()" />
    <div style="display: flex; gap: 1rem; overflow-x: auto; max-width: 100%; padding-bottom: 1rem;">
      <div class="card flex-shrink-0" style="min-width: 250px;" *ngFor="let candidate of filteredCandidates">
        <div class="card-body">
          <h5 class="card-title">{{ candidate.name }}</h5>
          <p class="mb-1"><strong>Email:</strong> {{ candidate.email }}</p>
          <p class="mb-1"><strong>Phone:</strong> {{ candidate.phone }}</p>
          <p class="mb-1"><strong>Address:</strong> {{ candidate.address }}</p>
          <p class="mb-1"><strong>Date of Birth:</strong> {{ candidate.birthDate | date: 'MM/dd/yyyy' }}</p>
          <p class="mb-1">
            <strong>Registered on:</strong> {{ candidate.registrationDate | date: 'MM/dd/yyyy' }} at
            {{ candidate.registrationTime }}
          </p>
          <div class="text-center mt-3">
            <a href="#" class="btn btn-primary btn-sm" (click)="showDetails(candidate.id, $event)">View details</a>
          </div>
        </div>
      </div>
    </div>

    <!-- COMPANIES -->
    <h2 class="my-5 text-center">Companies</h2>
    <input type="text" class="form-control mb-4" placeholder="Filter companies by email"
      [(ngModel)]="emailFilterCompanies" (ngModelChange)="filterCompanies()" />
    <div style="display: flex; gap: 1rem; overflow-x: auto; max-width: 100%; padding-bottom: 1rem;">
      <div class="card flex-shrink-0" style="min-width: 250px;" *ngFor="let company of filteredCompanies">
        <div class="card-body">
          <h5 class="card-title">{{ company.name }}</h5>
          <p class="mb-1"><strong>Email:</strong> {{ company.email }}</p>
          <p class="mb-1"><strong>Phone:</strong> {{ company.phone }}</p>
          <p class="mb-1"><strong>Address:</strong> {{ company.address }}</p>
          <p class="mb-1"><strong>Description:</strong> {{ company.description }}</p>
          <p class="mb-1"><strong>Area:</strong> {{ company.area }}</p>
          <p class="mb-1"><strong>NIPC:</strong> {{ company.nipc }}</p>
          <p class="mb-1"><strong>Approval Status:</strong> {{ company.approvalStatus }}</p>
          <p class="mb-1">
            <strong>Registered on:</strong> {{ company.registrationDate | date: 'MM/dd/yyyy' }} at
            {{ company.registrationTime }}
          </p>
          <div class="text-center mt-3">
            <a href="#" class="btn btn-primary btn-sm" (click)="showDetails(company.id, $event)">View details</a>
          </div>
          <div class="text-center mt-3">
            <button
              *ngIf="company.approvalStatus === 0"
              class="btn btn-success btn-sm me-2"
              (click)="approveCompany(company.id)">
              Approve
            </button>
            <button
              *ngIf="company.approvalStatus === 0"
              class="btn btn-danger btn-sm"
              (click)="rejectCompany(company.id)">
              Reject
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>